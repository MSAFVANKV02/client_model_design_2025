import{j as e,a as x}from"./vendor-Dyml7b79.js";import{z as m,d as g,e as h,t as j,F as y,f as v,g as P,k as N,h as T,i as w,B as O,m as n,s as k,j as f}from"./index-B6i9YlCS.js";import{P as F}from"./style-CPrzcRgE.js";import{_ as S}from"./ClipLoader-D-FKsc_Y.js";import{r as d}from"./react-rGsIzOq1.js";import{u as C}from"./hook-B4XIYRNK.js";import{S as E}from"./route_url-DrSYcLtw.js";import{A as $}from"./arrow-left-DSrZCQXP.js";import"./urlPath-7qCOueyb.js";import"./createLucideIcon-cTz5pK2-.js";const A=m.object({mobile:m.string().min(13,{message:"Phone number must be exactly 10 digits."}),mobile4OTP:m.string().min(10,{message:"Mobile number is required."})});function D(){const i=g(),b=C(),[c,u]=d.useState(!1),l=h({resolver:j(A),defaultValues:{mobile:"",mobile4OTP:""}}),p=async o=>{var a,t;u(!0);try{const r=await E({mobile:o.mobile4OTP});if(r.status===200){const{user:s}=r.data;s?s.isVerified&&s.isRegistered?s.kycApproved?(n(`OTP sent to ${o.mobile4OTP}`),i("/login")):s.kycsubmitted?(n(`OTP sent to ${o.mobile4OTP}`),i("/kyc")):(n(`OTP sent to ${o.mobile4OTP}`),i("/kyc"),b(k(s))):(n(`OTP sent to ${o.mobile4OTP}`),i(`/register/otp-verification?auth=${o.mobile4OTP}`)):f("Unexpected error occurred. Please try again.")}}catch(r){x.isAxiosError(r)?((a=r.response)==null?void 0:a.data.success)===!1&&f((t=r.response)==null?void 0:t.data.message):console.error("Unexpected error:",r)}finally{u(!1)}};return d.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs("div",{className:"h-screen w-screen flex relative",children:[e.jsx("img",{src:"/img/Background Images/Group 1109.svg",alt:"",className:"absolute object-cover top-0 left-0 bottom-0 right-0 w-full h-full"}),e.jsxs("div",{className:"bg-[#F5E9FF] sm:max-w-[350px] max-w-[90%] h-fit backdrop-blur-2xl rounded-2xl p-5 flex flex-col gap-3 m-auto",children:[e.jsx($,{onClick:()=>i("/"),className:"cursor-pointer"}),e.jsxs("div",{className:"flex flex-col w-full justify-center items-center space-y-5",children:[e.jsx("img",{src:"/img/Background Images/Group 1107.png",alt:"login page b2b",className:"w-32 h-32"}),e.jsx("p",{className:"font-bold",children:"Enter Mobile Number"}),e.jsx("p",{className:"text-gray-400 text-center",children:"Enter your 10-digit mobile number to receive the verification code."}),e.jsx(y,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(p),className:"w-full space-y-8",children:[e.jsx(v,{control:l.control,name:"mobile",render:({field:o})=>e.jsxs(P,{children:[e.jsx(N,{className:"flex items-start my-2",children:"Mobile Number"}),e.jsx(T,{children:e.jsx(F,{country:"in",preferredCountries:["in","us","sa","ae"],enableSearch:!0,placeholder:"Valid mobile",value:o.value,inputStyle:{width:"100%"},buttonStyle:{backgroundColor:"transparent",border:"none"},onChange:(a,t)=>{const r=(t==null?void 0:t.dialCode)||"";let s=a;s.startsWith(r)&&(s=s.slice(r.length)),l.setValue("mobile",`${r}-${s}`),l.setValue("mobile4OTP",s)},inputClass:"w-full p-5 mt-1 rounded-xl border border-gray-300"})}),e.jsx(w,{})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(O,{type:"submit",disabled:c,variant:"b2bStyle",className:"w-full ",size:"b2b",children:c?e.jsx(S,{color:"#ffff",size:20}):" Get Verification Code"})})]})})]})]})]})}export{D as default};
