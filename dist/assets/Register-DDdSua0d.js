import{j as e,a as f}from"./vendor-Dyml7b79.js";import{z as c,d as g,e as h,t as j,F as y,f as P,g as T,k as v,h as N,i as O,B as w,m as n,s as S,j as b}from"./index-CYux8Zly.js";import{P as k}from"./style-CPrzcRgE.js";import{_ as E}from"./ClipLoader-D-FKsc_Y.js";import{r as d}from"./react-rGsIzOq1.js";import{S as F}from"./urlPath-B8wF3stT.js";import{u as C}from"./hook-CnitOLZs.js";import{A as $}from"./arrow-left-DSrZCQXP.js";import"./createLucideIcon-cTz5pK2-.js";const R=c.object({mobile:c.string().min(13,{message:"Phone number must be exactly 10 digits."}),mobile4OTP:c.string().min(10,{message:"Mobile number is required."})});function D(){const i=g(),p=C(),[u,m]=d.useState(!1),l=h({resolver:j(R),defaultValues:{mobile:"",mobile4OTP:""}}),x=async r=>{var a,t;console.log(r.mobile4OTP);try{m(!0);const o=await f.post(F,{mobile:r.mobile4OTP});if(o.status===200){const{user:s}=o.data;s?s.isVerified&&s.isRegistered?s.kycApproved?(n(`OTP sent to ${r.mobile4OTP}`),i("/login")):s.kycsubmitted?(n(`OTP sent to ${r.mobile4OTP}`),i("/kyc")):(n(`OTP sent to ${r.mobile4OTP}`),i("/kyc"),p(S(s))):(n(`OTP sent to ${r.mobile4OTP}`),i(`/register/otp-verification?auth=${r.mobile4OTP}`)):b("Unexpected error occurred. Please try again.")}}catch(o){m(!1),f.isAxiosError(o)?((a=o.response)==null?void 0:a.data.success)===!1&&b((t=o.response)==null?void 0:t.data.message):console.log("Unexpected error:",o)}finally{m(!1)}};return d.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs("div",{className:"h-screen w-screen flex relative",children:[e.jsx("img",{src:"/img/Background Images/Group 1109.svg",alt:"",className:"absolute object-cover top-0 left-0 bottom-0 right-0 w-full h-full"}),e.jsxs("div",{className:"bg-[#F5E9FF] sm:max-w-[350px] max-w-[90%] h-fit backdrop-blur-2xl rounded-2xl p-5 flex flex-col gap-3 m-auto",children:[e.jsx($,{onClick:()=>i("/"),className:"cursor-pointer"}),e.jsxs("div",{className:"flex flex-col w-full justify-center items-center space-y-5",children:[e.jsx("img",{src:"/img/Background Images/Group 1107.png",alt:"login page b2b",className:"w-32 h-32"}),e.jsx("p",{className:"font-bold",children:"Enter Mobile Number"}),e.jsx("p",{className:"text-gray-400 text-center",children:"Enter your 10-digit mobile number to receive the verification code."}),e.jsx(y,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(x),className:"w-full space-y-8",children:[e.jsx(P,{control:l.control,name:"mobile",render:({field:r})=>e.jsxs(T,{children:[e.jsx(v,{className:"flex items-start my-2",children:"Mobile Number"}),e.jsx(N,{children:e.jsx(k,{country:"in",preferredCountries:["in","us","sa","ae"],enableSearch:!0,placeholder:"Valid mobile",value:r.value,inputStyle:{width:"100%"},buttonStyle:{backgroundColor:"transparent",border:"none"},onChange:(a,t)=>{const o=(t==null?void 0:t.dialCode)||"";let s=a;s.startsWith(o)&&(s=s.slice(o.length)),l.setValue("mobile",`${o}-${s}`),l.setValue("mobile4OTP",s)},inputClass:"w-full p-5 mt-1 rounded-xl border border-gray-300"})}),e.jsx(O,{})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(w,{type:"submit",disabled:u,variant:"b2bStyle",className:"w-full ",size:"b2b",children:u?e.jsx(E,{color:"#ffff",size:20}):" Get Verification Code"})})]})})]})]})]})}export{D as default};
