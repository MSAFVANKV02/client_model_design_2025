const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClipLoader-BcYfubg_.js","assets/vendor-BRM_wmTf.js"])))=>i.map(i=>d[i]);
import{_ as y,z as d,f as v,h as O,t as T,F as w,i as N,j as P,k as S,l as _,n as E,o as F,p as I,q as R,r as f,B as V,V as k,s as g,v as p,R as A}from"./index-CrOhDYs6.js";import{j as e}from"./mui-D-lFG_0o.js";import{a as C,r as c}from"./vendor-BRM_wmTf.js";import{A as L}from"./arrow-left-ySIyWLbj.js";const z=C.lazy(()=>y(()=>import("./ClipLoader-BcYfubg_.js").then(n=>n.C),__vite__mapDeps([0,1]))),B=d.object({otp:d.string().length(6,{message:"OTP must be exactly 6 digits."}).regex(/^\d+$/,{message:"OTP must only contain digits."})});function D(){const n=v(),m=c.useRef(null),[x,o]=c.useState(!1),l=new URLSearchParams(window.location.search).get("auth");c.useEffect(()=>{m.current&&m.current.focus()},[]);const u=O({resolver:T(B),defaultValues:{otp:""}}),h=async t=>{var r,s,i;console.log(`OTP entered: ${t.otp}`),o(!0);try{const a=await k({otp:t.otp,mobile:l});a.status===200&&(localStorage.removeItem("mobileNumber"),a.data.success&&(f("Otp Verified Successfully."),n(`/register/user-details?auth=${l}`)))}catch(a){o(!1),g.isAxiosError(a)&&(((r=a.response)==null?void 0:r.status)===500?p("Enter Valid Mobile"):((s=a.response)==null?void 0:s.data.success)===!1&&p((i=a.response)==null?void 0:i.data.message))}},b=async()=>{var t,r;try{o(!0),(await A({mobile:l})).status===200&&f("OTP Resent Successfully")}catch(s){o(!1),g.isAxiosError(s)?((t=s.response)==null?void 0:t.data.success)===!1&&p((r=s.response)==null?void 0:r.data.message):console.log("Unexpected error:",s)}finally{o(!1)}};return c.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs("div",{className:"h-screen w-screen flex relative",children:[e.jsx("img",{src:"/img/Background Images/Group 1109.svg",alt:"",className:"absolute object-cover top-0 left-0 bottom-0 right-0 w-full h-full"}),e.jsxs("div",{className:"bg-[#F5E9FF] max-w-[350px] h-fit backdrop-blur-2xl rounded-2xl p-5 flex flex-col gap-3 m-auto",children:[e.jsx(L,{onClick:()=>{localStorage.removeItem("otp-timer"),localStorage.removeItem("otp-finished"),n("/register")},className:"cursor-pointer"}),e.jsxs("div",{className:"flex flex-col w-full justify-center items-center space-y-5",children:[e.jsx("img",{src:"/img/Background Images/Group 1117.png",alt:"login page b2b",className:"w-28 h-28"}),e.jsx("h4",{className:"font-bold",children:"Verify Mobile Number"}),e.jsxs("div",{className:"text-gray-400 text-center text-sm capitalize",children:[e.jsx("span",{children:"Enter the 6-digit OTP sent to your mobile number"})," - ",e.jsx("span",{className:"text-black",children:l})," ."]}),e.jsx(w,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-8",children:[e.jsx(N,{control:u.control,name:"otp",render:({field:t})=>e.jsxs(P,{children:[e.jsx(S,{children:e.jsx(_,{maxLength:6,value:t.value,onChange:t.onChange,children:e.jsx(E,{className:"space-x-2 rounded-none",children:[...Array(6)].map((r,s)=>e.jsx(F,{index:s,ref:m,className:"border text-center text-xl rounded-md bg-white border-black",onChange:i=>{const j=i.target.value;t.onChange(j)}},s))})})}),e.jsx(I,{})]})}),e.jsx(R,{resendOtp:b,initialTime:60,onTimerFinish:()=>f("You can resend OTP now.")}),e.jsx(V,{type:"submit",variant:"b2bStyle",className:"w-full",size:"b2b",children:x?e.jsx(z,{color:"#ffff",size:20}):" Verify OTP"})]})})]})]})]})}export{D as default};
